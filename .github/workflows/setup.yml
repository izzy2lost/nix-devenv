name: ci

on:
  workflow_dispatch:

jobs:
  qemu-termux:
    runs-on: ubuntu-latest
    steps:
      - 
        name: Checkout repository
        uses: actions/checkout@v4

      - 
        name: Set up QEMU
        uses: docker/setup-qemu-action@v3.6.0

      - 
        name: Install proot-distro and run script
        run: |
          docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
          docker run --rm -v ${{ github.workspace }}:/workspace --name termux-env ubuntu bash -c "
            apt update &&
            apt install -y wget curl git make &&    
            pkg install proot
            make install &&
              cd /workspace &&
              chmod +x myscript.sh &&
              ./myscript.sh
            '
          "
